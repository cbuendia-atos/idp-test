2020-01-21 00:28:51,402 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 12012 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 00:28:51,405 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 00:28:52,619 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:28:52,624 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@30990c1b] to prepare test instance [eu.seal.as.ApmsApplicationTests@235d659c]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:28:52,680 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 00:28:52,682 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 00:28:52,684 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:28:52,696 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:28:52,698 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1a565afb, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2fd64b11, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@949c598, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@43d3aba5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6bfaa0a6, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@76e9f00b, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@314b9e4b, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6f1b8544, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@51dae791, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@688a2c09]
2020-01-21 00:28:53,232 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 00:28:53,235 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 00:28:53,258 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 00:28:53,261 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 00:28:53,265 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:28:53,270 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:28:53,276 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@233f52f8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@69ec93c2, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@19fec3d6, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@5287ba5f, org.springframework.test.context.support.DirtiesContextTestExecutionListener@b768a65, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6897a4a, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6986f93e, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6bce313, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@39266403, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@74b00247]
2020-01-21 00:28:53,531 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 00:28:54,285 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 00:28:54,436 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:28:54,470 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:28:54,614 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 00:28:54,616 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 00:28:54,617 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 1 ms
2020-01-21 00:28:54,735 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "123" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "78448719-191a-4c49-a57e-2fe175c40f44" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:28:54 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 00:28:54,742 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "123" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "78448719-191a-4c49-a57e-2fe175c40f44" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:28:54 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 00:28:54,757 INFO eu.seal.as.controllers.SamlControllers [main] SessionID b7215a49-2941-4b54-83fd-7117b09c710e
2020-01-21 00:28:54,759 INFO eu.seal.as.controllers.SamlControllers [main] Session: 
{id=_394a55a94873c15144a62678dafed1573503f4a6ab, type=Request, issuer=https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678, notBefore=2019-12-17T11:50:54Z, notAfter=2020-12-15T11:55:54Z, status={}, attributes=[{name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID, friendlyName=eduPersonTargetedID, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName, friendlyName=displayName, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn, friendlyName=cn, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail, friendlyName=mail, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation, friendlyName=eduPersonAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation, friendlyName=eduPersonScopedAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization, friendlyName=schacHomeOrganization, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType, friendlyName=schacHomeOrganizationType, encoding=UTF-8, isMandatory=false}], properties={SAML_RelayState=, SAML_RemoteSP_RequestId=_d951f7da6fd1cb7d2de7ab4df483098e, SAML_ForceAuthn=true, SAML_isPassive=false, SAML_NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent, SAML_AllowCreate=true}}

2020-01-21 00:28:54,759 INFO eu.seal.as.controllers.SamlControllers [main] Correct data + 
{"id":"_394a55a94873c15144a62678dafed1573503f4a6ab","type":"Request","issuer":"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678","notBefore":"2019-12-17T11:50:54Z","notAfter":"2020-12-15T11:55:54Z","status":{},"attributes":[{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID","friendlyName":"eduPersonTargetedID","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName","friendlyName":"displayName","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn","friendlyName":"cn","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail","friendlyName":"mail","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation","friendlyName":"eduPersonAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation","friendlyName":"eduPersonScopedAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization","friendlyName":"schacHomeOrganization","encoding":"UTF-8","isMandatory":false},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType","friendlyName":"schacHomeOrganizationType","encoding":"UTF-8","isMandatory":false}],"properties":{"SAML_RelayState":"","SAML_RemoteSP_RequestId":"_d951f7da6fd1cb7d2de7ab4df483098e","SAML_ForceAuthn":true,"SAML_isPassive":false,"SAML_NameIDFormat":"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent","SAML_AllowCreate":"true"}}
2020-01-21 00:30:06,330 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 12277 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 00:30:06,342 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 00:30:07,771 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:30:07,775 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@30990c1b] to prepare test instance [eu.seal.as.ApmsApplicationTests@49cb1baf]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:30:07,813 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 00:30:07,815 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 00:30:07,819 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:30:07,841 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:30:07,843 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@60c1663c, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@f5cf29b, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@3c66b7d8, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@37e69c43, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5c7dfc05, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@345d053b, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3d0cac1f, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3e8b3b79, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@d257579, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@518ddd3b]
2020-01-21 00:30:08,453 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 00:30:08,455 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 00:30:08,486 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 00:30:08,487 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 00:30:08,490 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:30:08,501 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:30:08,510 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@36224f93, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@1ee5632d, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@52a7928a, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@563ccd31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@72465eb2, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@478fb7dc, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@29d25e65, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@19b75b2b, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@59c43561, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@634f58d2]
2020-01-21 00:30:08,910 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 00:30:09,871 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 00:30:10,039 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:30:10,070 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:30:10,211 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 00:30:10,211 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 00:30:10,212 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 1 ms
2020-01-21 00:30:10,322 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "123" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:30:10 GMT" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "ac5ab9c0-06a6-4af5-bd37-0e9b097d14a2" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 00:30:10,334 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "123" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:30:10 GMT" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "ac5ab9c0-06a6-4af5-bd37-0e9b097d14a2" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 00:30:10,349 INFO eu.seal.as.controllers.SamlControllers [main] SessionID b7215a49-2941-4b54-83fd-7117b09c710e
2020-01-21 00:30:10,351 INFO eu.seal.as.controllers.SamlControllers [main] Session: 
{id=_394a55a94873c15144a62678dafed1573503f4a6ab, type=Request, issuer=https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678, notBefore=2019-12-17T11:50:54Z, notAfter=2020-12-15T11:55:54Z, status={}, attributes=[{name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID, friendlyName=eduPersonTargetedID, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName, friendlyName=displayName, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn, friendlyName=cn, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail, friendlyName=mail, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation, friendlyName=eduPersonAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation, friendlyName=eduPersonScopedAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization, friendlyName=schacHomeOrganization, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType, friendlyName=schacHomeOrganizationType, encoding=UTF-8, isMandatory=false}], properties={SAML_RelayState=, SAML_RemoteSP_RequestId=_d951f7da6fd1cb7d2de7ab4df483098e, SAML_ForceAuthn=true, SAML_isPassive=false, SAML_NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent, SAML_AllowCreate=true}}

2020-01-21 00:30:10,351 INFO eu.seal.as.controllers.SamlControllers [main] Correct data + 
{"id":"_394a55a94873c15144a62678dafed1573503f4a6ab","type":"Request","issuer":"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678","notBefore":"2019-12-17T11:50:54Z","notAfter":"2020-12-15T11:55:54Z","status":{},"attributes":[{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID","friendlyName":"eduPersonTargetedID","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName","friendlyName":"displayName","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn","friendlyName":"cn","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail","friendlyName":"mail","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation","friendlyName":"eduPersonAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation","friendlyName":"eduPersonScopedAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization","friendlyName":"schacHomeOrganization","encoding":"UTF-8","isMandatory":false},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType","friendlyName":"schacHomeOrganizationType","encoding":"UTF-8","isMandatory":false}],"properties":{"SAML_RelayState":"","SAML_RemoteSP_RequestId":"_d951f7da6fd1cb7d2de7ab4df483098e","SAML_ForceAuthn":true,"SAML_isPassive":false,"SAML_NameIDFormat":"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent","SAML_AllowCreate":"true"}}
2020-01-21 00:38:15,142 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 13908 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 00:38:15,144 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 00:38:16,407 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:38:16,411 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@1bb1fde8] to prepare test instance [eu.seal.as.ApmsApplicationTests@717d7587]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:38:16,459 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 00:38:16,467 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 00:38:16,472 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:38:16,481 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:38:16,484 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@118dcbbd, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7d979d34, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@350ec690, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@49cb1baf, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3664f108, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@77dba4cd, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@34a2d6e0, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@2525a5b8, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3458eca5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1e0fdb2f]
2020-01-21 00:38:17,002 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 00:38:17,005 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 00:38:17,025 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 00:38:17,026 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 00:38:17,028 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:38:17,035 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:38:17,037 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@de579ff, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7971c2a9, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2fd39436, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@60b5e80d, org.springframework.test.context.support.DirtiesContextTestExecutionListener@46394f65, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@31aab981, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@26be9a6, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@4d518c66, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@411fa0ce, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@251d7fdd]
2020-01-21 00:38:17,287 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 00:38:18,127 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 00:38:18,237 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:38:18,244 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:38:18,398 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 00:38:18,399 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 00:38:18,401 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 0 ms
2020-01-21 00:38:18,510 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:38:18 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "6be743d4-d175-46db-8f20-8e2752bf8c28" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 00:38:18,517 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:38:18 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "6be743d4-d175-46db-8f20-8e2752bf8c28" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 00:38:18,534 INFO eu.seal.as.controllers.SamlControllers [main] SessionID b7215a49-2941-4b54-83fd-7117b09c710e
2020-01-21 00:38:55,914 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 14073 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 00:38:55,918 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 00:38:57,029 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:38:57,032 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@30990c1b] to prepare test instance [eu.seal.as.ApmsApplicationTests@2c2a027c]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:38:57,053 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 00:38:57,055 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 00:38:57,057 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:38:57,066 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:38:57,067 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7c1447b5, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@49e4c2d5, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@24a2e565, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@3e36b7a0, org.springframework.test.context.support.DirtiesContextTestExecutionListener@60c1663c, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@f5cf29b, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3c66b7d8, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@37e69c43, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5c7dfc05, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@345d053b]
2020-01-21 00:38:57,564 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 00:38:57,566 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 00:38:57,587 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 00:38:57,589 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 00:38:57,590 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:38:57,600 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:38:57,602 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2478b629, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@39023dbf, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1a2ac487, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@570a62a5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@36224f93, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@1ee5632d, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@52a7928a, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@563ccd31, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@72465eb2, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@478fb7dc]
2020-01-21 00:38:57,861 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 00:38:58,593 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 00:38:58,705 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:38:58,712 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:38:58,883 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 00:38:58,883 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 00:38:58,884 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 0 ms
2020-01-21 00:38:59,007 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "5296c170-e9f9-450f-900b-69d3c9fce544" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:38:58 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 00:38:59,018 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "5296c170-e9f9-450f-900b-69d3c9fce544" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:38:58 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 00:38:59,033 INFO eu.seal.as.controllers.SamlControllers [main] SessionID b7215a49-2941-4b54-83fd-7117b09c710e
2020-01-21 00:40:20,260 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 14371 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 00:40:20,262 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 00:40:21,584 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:40:21,590 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@30990c1b] to prepare test instance [eu.seal.as.ApmsApplicationTests@12ad1b2a]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:40:21,666 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 00:40:21,669 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 00:40:21,672 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:40:21,679 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:40:21,685 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3a90c13c, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@39c96e48, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@188598ad, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@40d23c82, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7cf78c85, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@ebe067d, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3a4ab7f7, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6badba10, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@2b7e8044, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@550de6b8]
2020-01-21 00:40:22,194 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 00:40:22,196 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 00:40:22,211 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 00:40:22,212 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 00:40:22,214 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:40:22,221 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:40:22,223 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4aed311e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4c38cd16, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7ddcb0dc, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@f5bf288, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2c1d57bc, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@26c77f54, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3e856100, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6e9a0bea, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@28fc1132, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@355ce6a6]
2020-01-21 00:40:22,504 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 00:40:23,253 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 00:40:23,405 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:40:23,419 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:40:23,592 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 00:40:23,592 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 00:40:23,595 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 1 ms
2020-01-21 00:40:23,739 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:40:23 GMT" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "6847ad21-e4d7-4cf7-89a1-e83ff17290c7" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 00:40:23,746 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:40:23 GMT" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "6847ad21-e4d7-4cf7-89a1-e83ff17290c7" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 00:40:23,776 INFO eu.seal.as.controllers.SamlControllers [main] SessionID b7215a49-2941-4b54-83fd-7117b09c710e
2020-01-21 00:40:23,778 INFO eu.seal.as.controllers.SamlControllers [main] Session: 
{id=_394a55a94873c15144a62678dafed1573503f4a6ab, type=Request, issuer=https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678, notBefore=2019-12-17T11:50:54Z, notAfter=2020-12-15T11:55:54Z, status={}, attributes=[{name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID, friendlyName=eduPersonTargetedID, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName, friendlyName=displayName, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn, friendlyName=cn, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail, friendlyName=mail, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation, friendlyName=eduPersonAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation, friendlyName=eduPersonScopedAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization, friendlyName=schacHomeOrganization, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType, friendlyName=schacHomeOrganizationType, encoding=UTF-8, isMandatory=false}], properties={SAML_RelayState=, SAML_RemoteSP_RequestId=_d951f7da6fd1cb7d2de7ab4df483098e, SAML_ForceAuthn=true, SAML_isPassive=false, SAML_NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent, SAML_AllowCreate=true}}

2020-01-21 00:40:23,780 INFO eu.seal.as.controllers.SamlControllers [main] Correct data + 
{"id":"_394a55a94873c15144a62678dafed1573503f4a6ab","type":"Request","issuer":"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678","notBefore":"2019-12-17T11:50:54Z","notAfter":"2020-12-15T11:55:54Z","status":{},"attributes":[{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID","friendlyName":"eduPersonTargetedID","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName","friendlyName":"displayName","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn","friendlyName":"cn","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail","friendlyName":"mail","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation","friendlyName":"eduPersonAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation","friendlyName":"eduPersonScopedAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization","friendlyName":"schacHomeOrganization","encoding":"UTF-8","isMandatory":false},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType","friendlyName":"schacHomeOrganizationType","encoding":"UTF-8","isMandatory":false}],"properties":{"SAML_RelayState":"","SAML_RemoteSP_RequestId":"_d951f7da6fd1cb7d2de7ab4df483098e","SAML_ForceAuthn":true,"SAML_isPassive":false,"SAML_NameIDFormat":"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent","SAML_AllowCreate":"true"}}
2020-01-21 00:42:52,454 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 14896 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 00:42:52,456 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 00:42:53,776 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:42:53,792 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@30990c1b] to prepare test instance [eu.seal.as.ApmsApplicationTests@1697f2b3]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 00:42:53,827 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 00:42:53,830 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 00:42:53,832 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:42:53,840 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:42:53,845 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@208f0007, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a90c13c, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@39c96e48, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@188598ad, org.springframework.test.context.support.DirtiesContextTestExecutionListener@40d23c82, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7cf78c85, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@ebe067d, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3a4ab7f7, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6badba10, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@2b7e8044]
2020-01-21 00:42:54,349 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 00:42:54,351 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 00:42:54,371 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 00:42:54,372 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 00:42:54,374 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 00:42:54,381 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 00:42:54,383 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@6af310c7, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4aed311e, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4c38cd16, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@7ddcb0dc, org.springframework.test.context.support.DirtiesContextTestExecutionListener@f5bf288, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@2c1d57bc, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@26c77f54, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3e856100, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6e9a0bea, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@28fc1132]
2020-01-21 00:42:54,648 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 00:42:55,491 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 00:42:55,615 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:42:55,624 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 00:42:55,824 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 00:42:55,824 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 00:42:55,828 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 0 ms
2020-01-21 00:42:55,983 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "9d37977b-4188-4461-81e2-aab7adee5c70" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:42:55 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 00:42:55,991 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "9d37977b-4188-4461-81e2-aab7adee5c70" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Mon, 20 Jan 2020 23:42:55 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 00:42:56,013 INFO eu.seal.as.controllers.SamlControllers [main] SessionID b7215a49-2941-4b54-83fd-7117b09c710e
2020-01-21 00:42:56,015 INFO eu.seal.as.controllers.SamlControllers [main] Session: 
{id=_394a55a94873c15144a62678dafed1573503f4a6ab, type=Request, issuer=https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678, notBefore=2019-12-17T11:50:54Z, notAfter=2020-12-15T11:55:54Z, status={}, attributes=[{name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID, friendlyName=eduPersonTargetedID, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName, friendlyName=displayName, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn, friendlyName=cn, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail, friendlyName=mail, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation, friendlyName=eduPersonAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation, friendlyName=eduPersonScopedAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization, friendlyName=schacHomeOrganization, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType, friendlyName=schacHomeOrganizationType, encoding=UTF-8, isMandatory=false}], properties={SAML_RelayState=, SAML_RemoteSP_RequestId=_d951f7da6fd1cb7d2de7ab4df483098e, SAML_ForceAuthn=true, SAML_isPassive=false, SAML_NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent, SAML_AllowCreate=true}}

2020-01-21 00:42:56,016 INFO eu.seal.as.controllers.SamlControllers [main] Correct data + 
{"id":"_394a55a94873c15144a62678dafed1573503f4a6ab","type":"Request","issuer":"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678","notBefore":"2019-12-17T11:50:54Z","notAfter":"2020-12-15T11:55:54Z","status":{},"attributes":[{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID","friendlyName":"eduPersonTargetedID","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName","friendlyName":"displayName","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn","friendlyName":"cn","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail","friendlyName":"mail","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation","friendlyName":"eduPersonAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation","friendlyName":"eduPersonScopedAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization","friendlyName":"schacHomeOrganization","encoding":"UTF-8","isMandatory":false},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType","friendlyName":"schacHomeOrganizationType","encoding":"UTF-8","isMandatory":false}],"properties":{"SAML_RelayState":"","SAML_RemoteSP_RequestId":"_d951f7da6fd1cb7d2de7ab4df483098e","SAML_ForceAuthn":true,"SAML_isPassive":false,"SAML_NameIDFormat":"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent","SAML_AllowCreate":"true"}}
2020-01-21 00:42:56,016 INFO eu.seal.as.controllers.SamlControllers [main] Redirect
2020-01-21 00:43:27,791 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplication on Carloss-MacBook-Pro.local with PID 15007 (/Users/carlosbuendia/Documents/Projects/seal/idp-test/target/classes started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 00:43:27,796 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to default profiles: default
2020-01-21 00:43:29,008 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at eu.seal.as.ApmsApplication.main(ApmsApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:558)
	at java.base/java.lang.Thread.run(Thread.java:844)
2020-01-21 01:15:53,561 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplication on Carloss-MacBook-Pro.local with PID 21293 (/Users/carlosbuendia/Documents/Projects/seal/idp-test/target/classes started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 01:15:53,566 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to default profiles: default
2020-01-21 01:15:54,571 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at eu.seal.as.ApmsApplication.main(ApmsApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:558)
	at java.base/java.lang.Thread.run(Thread.java:844)
2020-01-21 01:16:14,210 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 21429 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 01:16:14,213 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 01:16:15,393 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 01:16:15,397 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@30990c1b] to prepare test instance [eu.seal.as.ApmsApplicationTests@3664f108]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 01:16:15,439 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 01:16:15,442 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 01:16:15,453 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 01:16:15,474 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 01:16:15,482 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@f5cf29b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3c66b7d8, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@37e69c43, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@5c7dfc05, org.springframework.test.context.support.DirtiesContextTestExecutionListener@345d053b, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3d0cac1f, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3e8b3b79, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@d257579, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@518ddd3b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@939ff41]
2020-01-21 01:16:16,039 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 01:16:16,041 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 01:16:16,060 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 01:16:16,061 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 01:16:16,062 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 01:16:16,071 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 01:16:16,073 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1ee5632d, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@52a7928a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@563ccd31, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@72465eb2, org.springframework.test.context.support.DirtiesContextTestExecutionListener@478fb7dc, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@29d25e65, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@19b75b2b, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@59c43561, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@634f58d2, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@585513a8]
2020-01-21 01:16:16,330 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 01:16:17,070 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 01:16:17,185 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 01:16:17,194 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 01:16:17,409 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 01:16:17,409 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 01:16:17,410 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 0 ms
2020-01-21 01:16:17,560 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "7d8f01a4-210c-4923-91d8-f2a3658b8b8d" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Tue, 21 Jan 2020 00:16:17 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 01:16:17,569 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "7d8f01a4-210c-4923-91d8-f2a3658b8b8d" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Tue, 21 Jan 2020 00:16:17 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 01:16:17,596 INFO eu.seal.as.controllers.ASControllers [main] * Session:{id=_394a55a94873c15144a62678dafed1573503f4a6ab, type=Request, issuer=https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678, notBefore=2019-12-17T11:50:54Z, notAfter=2020-12-15T11:55:54Z, status={}, attributes=[{name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID, friendlyName=eduPersonTargetedID, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName, friendlyName=displayName, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn, friendlyName=cn, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail, friendlyName=mail, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation, friendlyName=eduPersonAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation, friendlyName=eduPersonScopedAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization, friendlyName=schacHomeOrganization, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType, friendlyName=schacHomeOrganizationType, encoding=UTF-8, isMandatory=false}], properties={SAML_RelayState=, SAML_RemoteSP_RequestId=_d951f7da6fd1cb7d2de7ab4df483098e, SAML_ForceAuthn=true, SAML_isPassive=false, SAML_NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent, SAML_AllowCreate=true}}
* Correct data:{"id":"_394a55a94873c15144a62678dafed1573503f4a6ab","type":"Request","issuer":"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678","notBefore":"2019-12-17T11:50:54Z","notAfter":"2020-12-15T11:55:54Z","status":{},"attributes":[{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID","friendlyName":"eduPersonTargetedID","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName","friendlyName":"displayName","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn","friendlyName":"cn","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail","friendlyName":"mail","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation","friendlyName":"eduPersonAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation","friendlyName":"eduPersonScopedAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization","friendlyName":"schacHomeOrganization","encoding":"UTF-8","isMandatory":false},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType","friendlyName":"schacHomeOrganizationType","encoding":"UTF-8","isMandatory":false}],"properties":{"SAML_RelayState":"","SAML_RemoteSP_RequestId":"_d951f7da6fd1cb7d2de7ab4df483098e","SAML_ForceAuthn":true,"SAML_isPassive":false,"SAML_NameIDFormat":"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent","SAML_AllowCreate":"true"}}
2020-01-21 01:22:43,335 INFO org.springframework.boot.StartupInfoLogger [main] Starting ApmsApplicationTests on Carloss-MacBook-Pro.local with PID 22722 (started by carlosbuendia in /Users/carlosbuendia/Documents/Projects/seal/idp-test)
2020-01-21 01:22:43,337 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: test
2020-01-21 01:22:44,402 ERROR org.springframework.boot.SpringApplication [main] Application run failed
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 01:22:44,405 ERROR org.springframework.test.context.TestContextManager [main] Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@30990c1b] to prepare test instance [eu.seal.as.ApmsApplicationTests@10a98392]
java.lang.AbstractMethodError: javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
	at org.opensaml.xml.parse.BasicParserPool.setFeatures(BasicParserPool.java:568)
	at org.opensaml.xml.parse.BasicParserPool.initializePool(BasicParserPool.java:516)
	at org.opensaml.xml.parse.BasicParserPool.<init>(BasicParserPool.java:140)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:88)
	at org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:74)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:220)
	at org.opensaml.DefaultBootstrap.initializeXMLTooling(DefaultBootstrap.java:207)
	at org.opensaml.DefaultBootstrap.bootstrap(DefaultBootstrap.java:100)
	at org.opensaml.PaosBootstrap.bootstrap(PaosBootstrap.java:27)
	at org.springframework.security.saml.SAMLBootstrap.postProcessBeanFactory(SAMLBootstrap.java:42)
	at eu.seal.as.CustomSAMLBootstrap.postProcessBeanFactory(CustomSAMLBootstrap.java:23)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:286)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:181)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
2020-01-21 01:22:44,424 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.service.TestUniversityCodesServ], using DelegatingSmartContextLoader
2020-01-21 01:22:44,426 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.service.TestUniversityCodesServ]: no resource found for suffixes {-context.xml}.
2020-01-21 01:22:44,427 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.service.TestUniversityCodesServ]: TestUniversityCodesServ does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 01:22:44,434 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 01:22:44,435 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1a8b81e8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@234cff57, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5e8507f1, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4bcaa195, org.springframework.test.context.support.DirtiesContextTestExecutionListener@d08edc5, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@49fa1d74, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3f362135, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@21eee94f, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6bc24e72, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@724aefc3]
2020-01-21 01:22:44,963 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] error reading univ config file, path was /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json
2020-01-21 01:22:44,965 ERROR eu.seal.as.service.impl.UniversityDataServiceImpl [main] /home/nikos/NetBeansProjects/ESMO-AP-TEST/src/test/resources/testKeys/university_codes.json (No such file or directory)
2020-01-21 01:22:44,978 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.seal.as.controllers.AuthenticateControllerTest], using WebDelegatingSmartContextLoader
2020-01-21 01:22:44,979 INFO org.springframework.test.context.support.AbstractContextLoader [main] Could not detect default resource locations for test class [eu.seal.as.controllers.AuthenticateControllerTest]: no resource found for suffixes {-context.xml}.
2020-01-21 01:22:44,980 INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [eu.seal.as.controllers.AuthenticateControllerTest]: AuthenticateControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2020-01-21 01:22:44,988 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2020-01-21 01:22:44,994 INFO org.springframework.test.context.support.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@6df4af5, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@26e8ff8c, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5aa76ad2, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@590d6c76, org.springframework.test.context.support.DirtiesContextTestExecutionListener@25791d40, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@448c92fc, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@251c8145, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@17c0274c, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@7abeabe9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5a05dd30]
2020-01-21 01:22:45,218 INFO org.mockserver.mockserver.MockServer$2 [MockServer thread for port: 8000] MockServer started on port: 8000
2020-01-21 01:22:45,879 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-1] creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/sm/validateToken"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  },
	  "action" : {
	    "statusCode" : 200,
	    "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	  }
	}


2020-01-21 01:22:45,993 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 01:22:45,999 ERROR eu.seal.as.service.impl.HttpSignatureServiceImpl [main] keyId is required.
2020-01-21 01:22:46,159 INFO org.springframework.mock.web.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2020-01-21 01:22:46,160 INFO org.springframework.web.servlet.FrameworkServlet [main] Initializing Servlet ''
2020-01-21 01:22:46,164 INFO org.springframework.web.servlet.FrameworkServlet [main] Completed initialization in 1 ms
2020-01-21 01:22:46,310 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "26c4db43-a284-43ba-96fe-9ad8217abf13" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Tue, 21 Jan 2020 00:22:46 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "Connection",
	    "values" : [ "keep-alive" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken"
	}


2020-01-21 01:22:46,318 INFO org.mockserver.logging.LogFormatter [nioEventLoopGroup-3-2] returning response:

	{
	  "statusCode" : 200,
	  "body" : "{\"code\":\"OK\",\"sessionData\":{\"sessionId\":\"b7215a49-2941-4b54-83fd-7117b09c710e\",\"sessionVariables\":{\"apRequest\":{\"id\":\"_394a55a94873c15144a62678dafed1573503f4a6ab\",\"type\":\"Request\",\"issuer\":\"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678\",\"notBefore\":\"2019-12-17T11:50:54Z\",\"notAfter\":\"2020-12-15T11:55:54Z\",\"status\":{},\"attributes\":[{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID\",\"friendlyName\":\"eduPersonTargetedID\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName\",\"friendlyName\":\"displayName\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn\",\"friendlyName\":\"cn\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail\",\"friendlyName\":\"mail\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation\",\"friendlyName\":\"eduPersonAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation\",\"friendlyName\":\"eduPersonScopedAffiliation\",\"encoding\":\"UTF-8\",\"isMandatory\":\"false\"},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization\",\"friendlyName\":\"schacHomeOrganization\",\"encoding\":\"UTF-8\",\"isMandatory\":false},{\"name\":\"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType\",\"friendlyName\":\"schacHomeOrganizationType\",\"encoding\":\"UTF-8\",\"isMandatory\":false}],\"properties\":{\"SAML_RelayState\":\"\",\"SAML_RemoteSP_RequestId\":\"_d951f7da6fd1cb7d2de7ab4df483098e\",\"SAML_ForceAuthn\":true,\"SAML_isPassive\":false,\"SAML_NameIDFormat\":\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\",\"SAML_AllowCreate\":\"true\"}}}}}"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/sm/validateToken",
	  "queryStringParameters" : [ {
	    "name" : "token",
	    "values" : [ "" ]
	  } ],
	  "headers" : [ {
	    "name" : "Accept",
	    "values" : [ "text/plain, application/json, application/*+json, */*" ]
	  }, {
	    "name" : "x-request-id",
	    "values" : [ "26c4db43-a284-43ba-96fe-9ad8217abf13" ]
	  }, {
	    "name" : "original-date",
	    "values" : [ "Tue, 21 Jan 2020 00:22:46 GMT" ]
	  }, {
	    "name" : "digest",
	    "values" : [ "SHA-256=47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" ]
	  }, {
	    "name" : "User-Agent",
	    "values" : [ "Java/10.0.1" ]
	  }, {
	    "name" : "Host",
	    "values" : [ "localhost:8000" ]
	  }, {
	    "name" : "content-length",
	    "values" : [ "0" ]
	  } ],
	  "keepAlive" : true,
	  "secure" : false
	}


2020-01-21 01:22:46,337 INFO eu.seal.as.controllers.ASControllers [main] * Session:{id=_394a55a94873c15144a62678dafed1573503f4a6ab, type=Request, issuer=https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678, notBefore=2019-12-17T11:50:54Z, notAfter=2020-12-15T11:55:54Z, status={}, attributes=[{name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID, friendlyName=eduPersonTargetedID, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName, friendlyName=displayName, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn, friendlyName=cn, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail, friendlyName=mail, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation, friendlyName=eduPersonAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation, friendlyName=eduPersonScopedAffiliation, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization, friendlyName=schacHomeOrganization, encoding=UTF-8, isMandatory=false}, {name=https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType, friendlyName=schacHomeOrganizationType, encoding=UTF-8, isMandatory=false}], properties={SAML_RelayState=, SAML_RemoteSP_RequestId=_d951f7da6fd1cb7d2de7ab4df483098e, SAML_ForceAuthn=true, SAML_isPassive=false, SAML_NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent, SAML_AllowCreate=true}}
* Correct data:{"id":"_394a55a94873c15144a62678dafed1573503f4a6ab","type":"Request","issuer":"https://clave.sir2.rediris.es/module.php/saml/sp/saml2-acs.php/q2891006e_ea0002678","notBefore":"2019-12-17T11:50:54Z","notAfter":"2020-12-15T11:55:54Z","status":{},"attributes":[{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID","friendlyName":"eduPersonTargetedID","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#displayName","friendlyName":"displayName","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#cn","friendlyName":"cn","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#mail","friendlyName":"mail","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonAffiliation","friendlyName":"eduPersonAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonScopedAffiliation","friendlyName":"eduPersonScopedAffiliation","encoding":"UTF-8","isMandatory":"false"},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganization","friendlyName":"schacHomeOrganization","encoding":"UTF-8","isMandatory":false},{"name":"https://www.terena.org/activities/tf-emc2/docs/schac/schac-20110705-1.4.1.schema.txt#schacHomeOrganizationType","friendlyName":"schacHomeOrganizationType","encoding":"UTF-8","isMandatory":false}],"properties":{"SAML_RelayState":"","SAML_RemoteSP_RequestId":"_d951f7da6fd1cb7d2de7ab4df483098e","SAML_ForceAuthn":true,"SAML_isPassive":false,"SAML_NameIDFormat":"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent","SAML_AllowCreate":"true"}}
